# جلسه دهم جاوا اسکریپت

## مبحث query selector در جاوا اسکریپت

###### یک فایل HTML دارای تگ های فراوانی است و در مواردی بعضی از تگ بیش از یکبار در کد های ما استفاده شده است. از همین رو یافتن آن ها و ایجاد تغییر بر روی آن ها توسط جاوا اسکریپت بسیار پر رنگ است.

###### جاوا اسکریپت از روش جست و جویی استفاده می کند که بر اساس اصول select کردن css به تگ  مورد نظر خود می رسد. به این روش querySelector می گوید.

###### با چند مثال می توان این مسئله را بهتر درک نمود.

```bash
document.querySelector("p").style.backgroundColor = "red";
```
###### یا

```bash
document.querySelector("#text").style.backgroundColor = "red";
```

###### یا

```bash
document.querySelector(".btn").style.backgroundColor = "red";
```

###### چند نکته حائز اهمیت است. اول اینکه از همه حالت هایی که می شود یک تگ مورد نظر را در css انتخاب کرد، نیز در اینجا می توان از آن استفاده کرد و مورد دیگه اینکه وقتی از querySelector استفاده می کنیم. فقط یک تگ با آن مشخصات را می دهد و اولین موردی که از بالا به آن برسد را بر می گرداند. 

###### اگر بخواهیم لیستی از آن تگ ها با نوع select دلخواه داشته باشیم، باید از querySelectorAll استفاده کنیم که می توانید مطالعه آزاد بر روی آن داشته باشید.

###### برای مشاهده نمونه مثال ها دیگر به فایل DOMDocumentQuerySelector.html رجوع کنید.


## مبحث addEventListener در جاوا اسکریپت

###### همان طور که قبلا در تمرینات با addEventListener کار کردیم، حال می خواهیم به شرح بیشتر آن بپردازیم. توجه داشته باشید که addEventListener یکی از تابع های پر کاربرد در جاوا اسکریپت است.

###### در جاوا اسکریپت addEventListener یک حالت هوشیار نسبت به event مورد نظر شما بر روی یک تگ یا خاصیت خاصی در سیستم پیدا خواهد کرد.

###### قطعا با بیان چند مثال می توان موضوع را بهتر بیان نمود. ابتدا به اصول نوشتاری می پردازیم و سپس به نکات آن.

```bash
btn.addEventListener("click", function() {
    alert("Hello World!");
});
```

###### همان طور که در مثال فوق پیداست. اگر بر روی دکمه مورد نظر ما کلیک صورت بگیرد. تابع داخل addEventListener صدا زده می شود و hello world به نمایش در می آید.

###### اگر بخواهیم تابع اجرا شونده را بیرون از addEventListener بیاوریم، باید مانند الگو زیر عمل کنیم.

```bash
btn.addEventListener("click", show);

function show(){
    alert("Hello World!");
}
```
###### نکته بعدی اینکه می توان بر روی یک تگ، چندین addEventListener قرار داد که در صورت بروز هر یک، واکنش متفاوتی به اجرا در آید.


```bash
btn.addEventListener("mouseover", mouseOverState);
btn.addEventListener("click", clickState);
btn.addEventListener("mouseout", mouseOutState);

function mouseOverState(){
    console.log("mouseover");
}

function clickState(){
    console.log("click");
}

function mouseOutState(){
    console.log("mouseout");
}
```
###### نکته بعدی در مقدار boolean است که پارامتر سوم تابع addEventListener را تشکیل می دهد.

###### گاه ممکن است در یک لحظه دو event یکسان توسط addEventListener های متفاوت شناسایی شود و اینکه ابتدا کدام را اول اجرا کند و کدام رو دوم به مقدار سوم addEventListener بستگی دارد.

###### اگر مقدار سوم false باشد، تگ ها را از پایین با بالا یا فرزند به والد پیمایش می کند و اگر true باشد از بالا به پایین یا والد به فرزند. 

###### و اگر در کد نویسی، در موقعی تصمیم به این داشته باشید که یک addEventListener را غیر فعال کنید، از removeEventListener استفاده می کنند. به مثال زیر دقت کنید.

```bash
btn.addEventListener("click", show);

function show(){
    alert("Hello World!");
    btn.removeEventListener("click", show);
}
```
###### پس از یکبار اجرا دیگر کد فوق قابلیت اجرا نخواهد داشت.

###### برای دیدن مثال ها بیشتر می توانید فایل DOMEventListener.html را مشاهده کنید.


## مبحث callback در جاوا اسکریپت

###### در جاوا اسکریپت تابع ها برای اجرا گاهی توالی دارند و گاهی به شکل یک تابع تو در تو از یکدیگر استفاده می کنند. به این منتظر ماندن جواب یک تابع در تابع دیگر callback می گویند.

###### بیایم با چند مثال ساده، درک این مسئله را برای خود ساده تر کنیم.

```bash
function show(value) {
    console.log(value)
}

function calculator(num1, num2) {
    let sum = num1 + num2;
    show(sum);
}

calculator(5, 5);
```
######  در مثال فوق دو تابع داریم که اول جهت نمایش هر آنچه ما بخواهیم ساخته شده است و دومی تابعی است که در آن جمع دو عدد را انجام می دهد و سپس تابع show را فرا می خواند. وقتی در این قطعه کد تابع calculator را صدا می زنیم و دو مقدار به دلخواه می دهیم، پس از انجام عملیات جمع، حاصل را به عنوان پارامتر به تابع show تحویل می دهیم تا عمل نمایش نیز انجام شود. این نوع اجرا که یک تابع اجرا می شود و سپس تابع دیگر، به آن توالی می گویند.

###### حال به مثال دیگر دقت کنید.

```bash
function show(value) {
    console.log(value)
}

function calculator(num1, num2, callback) {
    let sum = num1 + num2;
    callback(sum);
}

calculator5(5, 5, show);
```
###### در اینجا همان الگو کد قبلی نوشته شده است با این تفاوت که در تابع calculator پارامتر سوم نیز اضافه شده است. و در این پارامتر، نام تابع را می گیریم و موقع نیاز آن را اجرا می کنیم و موقع اجرا به پارامتر سوم خود رجوع می کنیم و منتظر آن می مانیم. اینکه تابع از قبل پیش بینی نشده است و بعدا آن را فراخوانی می کنیم، اصطلاحا به آن callback می گویند.

###### برای دیدن مثال های بیشتر می توانید فایل Callback.html مشاهده و اجرا نمایید.

